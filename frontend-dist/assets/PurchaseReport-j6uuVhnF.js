import{a4 as w,j as e,s as S,al as k,r as u,B as f,P as p,T as n,G as g,F as j,aK as T,ac as m,av as N,ae as P,aj as A,ak as R,am as W,a7 as s,an as L,bk as z,E as B,ar as y}from"./index-DKVd45z4.js";import{S as F}from"./SearchField-CY9loRQt.js";import{T as h}from"./TableSortLabel-NbLxDsiW.js";import"./InputAdornment-yL_pfRPN.js";const M=w(e.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),I=S(k)(({theme:o})=>({backgroundColor:"#1a237e","& th":{color:"white",fontWeight:"bold",padding:"16px"},"& th .MuiTableSortLabel-root":{color:"white",fontSize:"0.95rem",fontWeight:"600"},"& th .MuiTableSortLabel-root.Mui-active":{color:"white",fontSize:"1rem",fontWeight:"700"},"& th:hover":{backgroundColor:"#283593"},"& th .MuiTableSortLabel-root:hover":{color:"white"}})),O=({purchaseData:o})=>{var i,c,r;return e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(j,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(f,{sx:{backgroundColor:"#e8f5e9",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(T,{color:"success",sx:{fontSize:30}})}),e.jsx(n,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Purchases"}),e.jsxs(n,{variant:"h4",sx:{fontWeight:700,color:"#2e7d32"},children:["₵",m(((i=o==null?void 0:o.totalPurchases)==null?void 0:i.toFixed(2))||"0.00")]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(j,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(f,{sx:{backgroundColor:"#e3f2fd",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(N,{color:"primary",sx:{fontSize:30}})}),e.jsx(n,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Paid"}),e.jsxs(n,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:["₵",m(((c=o==null?void 0:o.totalPaid)==null?void 0:c.toFixed(2))||"0.00")]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(j,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(f,{sx:{backgroundColor:"#ffebee",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(P,{color:"error",sx:{fontSize:30}})}),e.jsx(n,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Outstanding Balance"}),e.jsxs(n,{variant:"h4",sx:{fontWeight:700,color:"#d32f2f"},children:["₵",m(((r=o==null?void 0:o.totalOutstanding)==null?void 0:r.toFixed(2))||"0.00")]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(j,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(f,{sx:{backgroundColor:"#fff3e0",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(M,{color:"secondary",sx:{fontSize:30}})}),e.jsx(n,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Pending Orders"}),e.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:(o==null?void 0:o.pendingPurchases)||0})]})})]})},H=({purchaseTransactions:o=[]})=>{const[i,c]=u.useState("asc"),[r,b]=u.useState("date"),d=t=>{c(r===t&&i==="asc"?"desc":"asc"),b(t)},x=[...o].sort((t,a)=>{let l=0;if(r==="date"){const v=new Date(t.createdAt||t.date),C=new Date(a.createdAt||a.date);isNaN(v.getTime())&&isNaN(C.getTime())?l=0:isNaN(v.getTime())?l=1:isNaN(C.getTime())?l=-1:l=v-C}else r==="vendorName"?l=(t.vendorName||"").localeCompare(a.vendorName||""):r==="balance"?l=(t.balance||0)-(a.balance||0):r==="amountPaid"?l=(t.amountPaid||0)-(a.amountPaid||0):r==="totalCost"&&(l=(t.totalCost||0)-(a.totalCost||0));return l*(i==="asc"?1:-1)});return e.jsx(A,{component:p,elevation:2,sx:{borderRadius:"12px",overflow:"hidden"},children:e.jsxs(R,{children:[e.jsx(I,{children:e.jsxs(W,{children:[e.jsx(s,{children:e.jsx(h,{active:r==="date",direction:r==="date"?i:"asc",onClick:()=>d("date"),children:"Date"})}),e.jsx(s,{children:e.jsx(h,{active:r==="vendorName",direction:r==="vendorName"?i:"asc",onClick:()=>d("vendorName"),children:"Vendor"})}),e.jsx(s,{align:"right",children:e.jsx(h,{active:r==="workerName",direction:r==="workerName"?i:"asc",onClick:()=>d("workerName"),children:"Restocked By"})}),e.jsx(s,{align:"right",children:e.jsx(h,{active:r==="totalCost",direction:r==="totalCost"?i:"asc",onClick:()=>d("totalCost"),children:"Total Cost"})}),e.jsx(s,{align:"right",children:e.jsx(h,{active:r==="amountPaid",direction:r==="amountPaid"?i:"asc",onClick:()=>d("amountPaid"),children:"Amount Paid"})}),e.jsx(s,{align:"right",children:e.jsx(h,{active:r==="balance",direction:r==="balance"?i:"asc",onClick:()=>d("balance"),children:"Balance"})}),e.jsx(s,{align:"right",children:"Status"})]})}),e.jsx(L,{children:e.jsx(z,{children:x.map((t,a)=>e.jsxs(B.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:a*.05},style:{display:"table-row",backgroundColor:"white"},children:[e.jsx(s,{children:t.createdAt||t.date?new Date(t.createdAt||t.date).toLocaleDateString():"N/A"}),e.jsx(s,{children:y(t.vendorName||"Unknown Vendor")}),e.jsx(s,{align:"right",children:y(t.workerName||"N/A")}),e.jsxs(s,{align:"right",children:["₵",m((t.totalCost||0).toFixed(2))]}),e.jsxs(s,{align:"right",children:["₵",m((t.amountPaid||0).toFixed(2))]}),e.jsxs(s,{align:"right",children:["₵",m((t.balance||0).toFixed(2))]}),e.jsx(s,{align:"right",children:e.jsx(n,{variant:"body2",sx:{color:t.status==="completed"?"#2e7d32":"#f57c00",fontWeight:600,textTransform:"capitalize"},children:t.status||"pending"})})]},t.id||a))})})]})})},q=({purchaseData:o,purchaseTransactions:i})=>{const[c,r]=u.useState(""),b=x=>{r(x)},d=u.useMemo(()=>!i||!Array.isArray(i)?[]:i.filter(x=>{const t=c.toLowerCase();return(x.vendorName||"").toLowerCase().includes(t)||(x.workerName||"").toLowerCase().includes(t)||(x.status||"").toLowerCase().includes(t)}),[i,c]);return e.jsxs(f,{sx:{p:3},children:[e.jsxs(p,{elevation:0,sx:{p:3,mb:4,backgroundColor:"#f8f9fa"},children:[e.jsx(n,{variant:"h4",sx:{fontWeight:600,color:"#1a237e",mb:3},children:"Purchase Report"}),e.jsx(O,{purchaseData:o})]}),e.jsxs(p,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(n,{variant:"h5",sx:{fontWeight:600,color:"#1a237e"},children:"Purchase Transactions"}),e.jsx(F,{onSearch:b})]}),e.jsx(H,{purchaseTransactions:d})]})]})};export{I as StyledTableHead,q as default};
