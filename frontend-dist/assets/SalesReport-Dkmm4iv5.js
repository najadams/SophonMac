import{a4 as T,j as e,s as y,al as w,r as j,B as x,P as v,T as s,G as m,F as g,ad as A,ac as l,b_ as k,ae as N,aj as R,ak as W,am as L,a7 as i,an as B,bk as F,E as P,ar as S}from"./index-GTE1N4Ws.js";import{S as z}from"./SearchField-D7IF_go7.js";import{T as f}from"./TableSortLabel-PFysmw3x.js";import"./InputAdornment-C5JJzB5e.js";const M=T([e.jsx("path",{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83z"},"0"),e.jsx("path",{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58C12.25.21 11.74 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41zM7.25 3c.69 0 1.25.56 1.25 1.25S7.94 5.5 7.25 5.5 6 4.94 6 4.25 6.56 3 7.25 3"},"1")],"Discount"),I=y(w)(({theme:r})=>({backgroundColor:"#1a237e","& th":{color:"white",fontWeight:"bold",padding:"16px"},"& th .MuiTableSortLabel-root":{color:"white",fontSize:"0.95rem",fontWeight:"600"},"& th .MuiTableSortLabel-root.Mui-active":{color:"white",fontSize:"1rem",fontWeight:"700"},"& th:hover":{backgroundColor:"#283593"},"& th .MuiTableSortLabel-root:hover":{color:"white"}})),O=({salesData:r})=>e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(g,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(x,{sx:{backgroundColor:"#e8f5e9",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(A,{color:"success",sx:{fontSize:30}})}),e.jsx(s,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Sales"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#2e7d32"},children:["₵",l(r==null?void 0:r.totalSales.toFixed(2))]})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(g,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(x,{sx:{backgroundColor:"#e3f2fd",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(k,{color:"primary",sx:{fontSize:30}})}),e.jsx(s,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Amount Paid"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:["₵",l(r==null?void 0:r.totalAmountPaid.toFixed(2))]})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(g,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(x,{sx:{backgroundColor:"#ffebee",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(N,{color:"error",sx:{fontSize:30}})}),e.jsx(s,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Balance Owed"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#d32f2f"},children:["₵",l(r==null?void 0:r.totalBalance.toFixed(2))]})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(g,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(x,{sx:{backgroundColor:"#fff3e0",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(M,{color:"secondary",sx:{fontSize:30}})}),e.jsx(s,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Discounts"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:["₵",l(r==null?void 0:r.totalDiscounts.toFixed(2))]})]})})]}),Y=({salesTransactions:r=[]})=>{const[n,u]=j.useState("asc"),[o,b]=j.useState("date"),d=t=>{u(o===t&&n==="asc"?"desc":"asc"),b(t)},h=[...r].sort((t,c)=>{let a=0;if(o==="date"){const p=new Date(t.createdAt),C=new Date(c.createdAt);isNaN(p.getTime())&&isNaN(C.getTime())?a=0:isNaN(p.getTime())?a=1:isNaN(C.getTime())?a=-1:a=p-C}else o==="customerName"?a=t.customerName.localeCompare(c.customerName):o==="balance"?a=0:o==="totalAmountPaid"?a=(t.total||0)-(t.discount||0)-((c.total||0)-(c.discount||0)):o==="totalAmount"&&(a=(t.total||0)-(c.total||0));return a*(n==="asc"?1:-1)});return e.jsx(R,{component:v,elevation:2,sx:{borderRadius:"12px",overflow:"hidden"},children:e.jsxs(W,{children:[e.jsx(I,{children:e.jsxs(L,{children:[e.jsx(i,{children:e.jsx(f,{active:o==="date",direction:o==="date"?n:"asc",onClick:()=>d("date"),children:"Date"})}),e.jsx(i,{children:e.jsx(f,{active:o==="customerName",direction:o==="customerName"?n:"asc",onClick:()=>d("customerName"),children:"Customer Name"})}),e.jsx(i,{align:"right",children:"Cashier"}),e.jsx(i,{align:"right",children:e.jsx(f,{active:o==="totalAmount",direction:o==="totalAmount"?n:"asc",onClick:()=>d("totalAmount"),children:"Total Amount"})}),e.jsx(i,{align:"right",children:e.jsx(f,{active:o==="totalAmountPaid",direction:o==="totalAmountPaid"?n:"asc",onClick:()=>d("totalAmountPaid"),children:"Total Amount Paid"})}),e.jsx(i,{align:"right",children:"Discount"}),e.jsx(i,{align:"right",children:e.jsx(f,{active:o==="balance",direction:o==="balance"?n:"asc",onClick:()=>d("balance"),children:"Balance"})})]})}),e.jsx(B,{children:e.jsx(F,{mode:"popLayout",children:h.map((t,c)=>e.jsxs(P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:c*.02,ease:"easeOut"},style:{display:"table-row",backgroundColor:"white"},children:[e.jsx(i,{children:t.createdAt&&!isNaN(new Date(t.createdAt).getTime())?new Date(t.createdAt).toLocaleDateString():"Invalid Date"}),e.jsx(i,{children:S(t.customerName||"Walk-in Customer")}),e.jsx(i,{align:"right",children:S(t.workerName)}),e.jsxs(i,{align:"right",children:["₵",l((t.total||0).toFixed(2))]}),e.jsxs(i,{align:"right",children:["₵",l(((t.total||0)-(t.discount||0)).toFixed(2))]}),e.jsxs(i,{align:"right",children:["₵",l(t.discount||0)]}),e.jsxs(i,{align:"right",children:["₵",l(0 .toFixed(2))]})]},t.receiptId))})})]})})},U=({salesData:r,salesTransactions:n})=>{const[u,o]=j.useState(""),b=h=>{o(h)},d=j.useMemo(()=>n.filter(h=>{const t=u.toLowerCase();return(h.customerName||"").toLowerCase().includes(t)||(h.workerName||"").toLowerCase().includes(t)}),[n,u]);return e.jsxs(x,{sx:{p:3},children:[e.jsxs(v,{elevation:0,sx:{p:3,mb:4,backgroundColor:"#f8f9fa"},children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600,color:"#1a237e",mb:3},children:"Sales Report"}),e.jsx(O,{salesData:r})]}),e.jsxs(v,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(s,{variant:"h5",sx:{fontWeight:600,color:"#1a237e"},children:"Sales Transactions"}),e.jsx(z,{onSearch:b})]}),e.jsx(Y,{salesTransactions:d})]})]})};export{I as StyledTableHead,U as default};
