import{a4 as z,j as e,U as oe,R as ce,r as ee,Q as de,Z as ne,aD as T,C as xe,aq as U,B as c,W as me,ay as q,T as d,P as je,aE as he,aF as v,as as se,af as B,av as H,ax as ue,ar as F,H as p,G as r,b as P,ap as pe,aG as k,aH as i,aI as t,aJ as l,c as m,aK as ye,J as f,ag as be,aL as ge,aM as ve,aN as fe,$ as Se,aC as E,F as we,D as Ie,aO as Ce}from"./index-GTE1N4Ws.js";import{F as Ae,a as Me,b as Pe}from"./formik.esm-gcJT4q9S.js";import{P as O}from"./People-Cbr1VZdK.js";import{S as re,a as Ee}from"./Settings-5bOKR95c.js";import{Z as S,L as Le,B as Re}from"./LocalOffer-Dniztalr.js";import{s as _,P as Ve}from"./styled-VNJnpstm.js";import{A as Te}from"./Autocomplete-CB6kXBb8.js";import{S as He}from"./Slide-BvhP9BUq.js";import{L as ke}from"./Lock-DCBNiuEE.js";import{L as We}from"./LinearProgress-CkWFVjTZ.js";import"./usePreviousProps-yVRdJcfX.js";const Fe=z(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment"),ae=z(e.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),N=z(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),Ne=z(e.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),W=_(Pe)({margin:"10px 0",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)"}}),y=_(we)(({theme:s})=>({transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-5px)",boxShadow:s.shadows[8]}})),Oe=_(m)(({theme:s})=>({transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:s.shadows[4]}}));function w(s){const{children:b,value:I,index:j,...g}=s;return e.jsx("div",{role:"tabpanel",hidden:I!==j,id:`account-tabpanel-${j}`,"aria-labelledby":`account-tab-${j}`,...g,children:I===j&&e.jsx(c,{sx:{py:3},children:b})})}const ze=({user:s})=>{const b=s.role,I=ne[b]||[],g=((o,C)=>{const u=[];for(let x=0;x<o.length;x+=C)u.push(o.slice(x,x+C));return u})(I,2);return e.jsxs(r,{container:!0,spacing:2,children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(N,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"Privileges"})]}),e.jsx(Ie,{sx:{mb:3}})]}),g.map((o,C)=>e.jsx(Ce.Fragment,{children:o.map(u=>e.jsx(r,{item:!0,xs:6,children:e.jsxs(d,{variant:"body1",sx:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:"8px",color:"#4CAF50"},children:"âœ“"}),F(u.split("_").join(" "))]})},u))},C))]})},Ue=ue().shape({name:E().required("Required"),username:E().required("Required"),role:E().required("Required"),contact:E(),email:E().email("Invalid email"),password:E()}),Xe=()=>{const s=oe(a=>a.userState.currentUser),b=s.id||s._id,I=ce(),[j,g]=ee.useState({show:!1,message:"",type:""}),[o,C]=ee.useState(0),u=de(),x=ne[s==null?void 0:s.role]||[],G=x.includes(T.VIEW_REPORTS),D=x.includes(T.MANAGE_INVENTORY),$=x.includes(T.PROCESS_SALES),Y=x.includes(T.MANAGE_USERS),Z=x.includes(T.MANAGE_SETTINGS),ie=(a,h)=>{C(h)},te=async(a,{setSubmitting:h})=>{var L,A,R,n,M,J,K,Q,X;try{const V={name:((A=(L=a.name)==null?void 0:L.trim())==null?void 0:A.toLowerCase())||s.name,username:((n=(R=a.username)==null?void 0:R.trim())==null?void 0:n.toLowerCase())||s.username,email:((J=(M=a.email)==null?void 0:M.trim())==null?void 0:J.toLowerCase())||s.email,contact:((K=a.contact)==null?void 0:K.trim())||s.contact,role:((X=(Q=a.role)==null?void 0:Q.trim())==null?void 0:X.toLowerCase())||s.role};a.password&&a.password.trim()!==""&&(V.password=await ve.hash(a.password,10));const le={userId:b,...V};await fe(le),I(Se.setCurrentUser({id:b,_id:b,...s,...V})),g({show:!0,message:"Account updated successfully!",type:"success"})}catch(V){g({show:!0,message:"Error updating account.",type:"error"}),console.error(V)}finally{h(!1)}};return e.jsx("div",{className:"page",children:e.jsxs(xe,{maxWidth:"md",children:[e.jsx(U,{in:!0,timeout:1e3,children:e.jsxs(c,{display:"flex",alignItems:"center",mb:4,children:[e.jsx(me,{sx:{width:64,height:64,bgcolor:"primary.main",mr:2},children:e.jsx(q,{sx:{fontSize:40}})}),e.jsxs(c,{children:[e.jsx(d,{variant:"h4",component:"h1",sx:{fontWeight:"bold"},children:"My Account"}),e.jsx(d,{variant:"subtitle1",color:"text.secondary",children:"Manage your account settings and preferences"})]})]})}),e.jsx(je,{sx:{width:"100%",mb:4},children:e.jsxs(he,{value:o,onChange:ie,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"account tabs",children:[e.jsx(v,{icon:e.jsx(q,{}),label:"Profile"}),e.jsx(v,{icon:e.jsx(N,{}),label:"Security"}),G&&e.jsx(v,{icon:e.jsx(se,{}),label:"Sales History"}),D&&e.jsx(v,{icon:e.jsx(B,{}),label:"Inventory Access"}),$&&e.jsx(v,{icon:e.jsx(H,{}),label:"Payment Methods"}),Y&&e.jsx(v,{icon:e.jsx(O,{}),label:"User Management"}),Z&&e.jsx(v,{icon:e.jsx(re,{}),label:"System Settings"})]})}),e.jsx(Ae,{initialValues:{name:F(s.name)||"",username:F(s.username)||"",role:s.role||"",contact:s.contact||"",email:s.email||"",password:""},validationSchema:Ue,onSubmit:te,children:({values:a,handleChange:h,handleBlur:L,setFieldValue:A,isSubmitting:R})=>e.jsxs(Me,{children:[e.jsxs(w,{value:o,index:0,children:[e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(q,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"Personal Information"})]}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(W,{as:P,fullWidth:!0,name:"name",label:"Full Name",variant:"outlined",value:a.name,onChange:h,onBlur:n=>{L(n),A("name",F(n.target.value))}})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(W,{as:P,fullWidth:!0,name:"username",label:"Username",variant:"outlined",value:a.username,onChange:h,onBlur:n=>{L(n),A("username",F(n.target.value))}})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(Te,{options:Object.values(pe),getOptionLabel:n=>n,renderInput:n=>e.jsx(P,{...n,label:"Role",name:"role",variant:"outlined",required:!0}),value:a.role,onChange:(n,M)=>{A("role",M)},isOptionEqualToValue:(n,M)=>n===M,disableClearable:!0,disabled:!!s.role})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(W,{as:P,fullWidth:!0,name:"email",label:"Email",variant:"outlined",value:a.email,onChange:h})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(W,{as:P,fullWidth:!0,type:"password",name:"password",label:"Password",variant:"outlined",value:a.password,onChange:h})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(W,{as:P,fullWidth:!0,name:"contact",label:"Contact",variant:"outlined",value:a.contact,onChange:h})})]})]})})}),e.jsx(He,{direction:"up",in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsx(p,{children:e.jsx(ze,{user:s})})})})]}),e.jsx(w,{value:o,index:1,children:e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(N,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"Security Settings"})]}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(k,{children:[e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(ke,{color:"primary"})}),e.jsx(l,{primary:"Change Password",secondary:"Update your account password"}),e.jsx(m,{variant:"outlined",color:"primary",children:"Change"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(N,{color:"primary"})}),e.jsx(l,{primary:"Two-Factor Authentication",secondary:"Add an extra layer of security"}),e.jsx(Ee,{})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(ae,{color:"primary"})}),e.jsx(l,{primary:"Login History",secondary:"View your recent login activity"}),e.jsx(m,{variant:"outlined",color:"primary",children:"View"})]})]})})})]})})})}),G&&e.jsx(w,{value:o,index:2,children:e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(se,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"Sales History"})]}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(k,{children:[e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(ye,{color:"primary"})}),e.jsx(l,{primary:"Today's Sales",secondary:"View your sales for today"}),e.jsx(f,{label:"12",color:"primary"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(Fe,{color:"primary"})}),e.jsx(l,{primary:"Weekly Report",secondary:"View your weekly sales report"}),e.jsx(m,{variant:"outlined",color:"primary",children:"View"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(ae,{color:"primary"})}),e.jsx(l,{primary:"Monthly Report",secondary:"View your monthly sales report"}),e.jsx(m,{variant:"outlined",color:"primary",children:"View"})]})]})})})]})})})}),D&&e.jsx(w,{value:o,index:3,children:e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(B,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"Inventory Access"})]}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(k,{children:[e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(B,{color:"primary"})}),e.jsx(l,{primary:"Stock Management",secondary:"Manage inventory levels"}),e.jsx(f,{label:"Enabled",color:"success"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(Le,{color:"primary"})}),e.jsx(l,{primary:"Price Management",secondary:"Update product prices"}),e.jsx(f,{label:"Enabled",color:"success"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(O,{color:"primary"})}),e.jsx(l,{primary:"Supplier Management",secondary:"Manage supplier information"}),e.jsx(f,{label:"Enabled",color:"success"})]})]})})})]})})})}),$&&e.jsx(w,{value:o,index:4,children:e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(H,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"Payment Methods"})]}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(k,{children:[e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(H,{color:"primary"})}),e.jsx(l,{primary:"Cash",secondary:"Process cash payments"}),e.jsx(f,{label:"Enabled",color:"success"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(H,{color:"primary"})}),e.jsx(l,{primary:"Mobile Money",secondary:"Process mobile money payments"}),e.jsx(f,{label:"Enabled",color:"success"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(H,{color:"primary"})}),e.jsx(l,{primary:"Card",secondary:"Process card payments"}),e.jsx(f,{label:"Enabled",color:"success"})]})]})})})]})})})}),Y&&e.jsx(w,{value:o,index:5,children:e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(O,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"User Management"})]}),e.jsx(r,{container:!0,spacing:2,children:e.jsxs(r,{item:!0,xs:12,children:[e.jsx(m,{variant:"contained",color:"primary",startIcon:e.jsx(Ve,{}),onClick:()=>u("/employee/new"),fullWidth:!0,sx:{mb:2},children:"Add New Employee"}),e.jsx(m,{variant:"outlined",color:"primary",startIcon:e.jsx(O,{}),onClick:()=>u("/employees"),fullWidth:!0,children:"Manage Employees"})]})})]})})})}),Z&&e.jsx(w,{value:o,index:6,children:e.jsx(S,{in:!0,timeout:800,children:e.jsx(y,{sx:{mb:4},children:e.jsxs(p,{children:[e.jsxs(c,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(re,{sx:{mr:1,color:"primary.main"}}),e.jsx(d,{variant:"h6",children:"System Settings"})]}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(k,{children:[e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(Re,{color:"primary"})}),e.jsx(l,{primary:"System Backup",secondary:"Manage system backups"}),e.jsx(m,{variant:"outlined",color:"primary",children:"Configure"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(N,{color:"primary"})}),e.jsx(l,{primary:"Security Settings",secondary:"Configure system security"}),e.jsx(m,{variant:"outlined",color:"primary",children:"Configure"})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(Ne,{color:"primary"})}),e.jsx(l,{primary:"System Optimization",secondary:"Optimize system performance"}),e.jsx(m,{variant:"outlined",color:"primary",children:"Configure"})]})]})})})]})})})}),j.show&&e.jsx(U,{in:!0,timeout:500,children:e.jsx(be,{severity:j.type,onClose:()=>g({show:!1}),sx:{mb:2},children:j.message})}),R&&e.jsx(We,{sx:{mb:2}}),e.jsx(U,{in:!0,timeout:1e3,children:e.jsx(c,{mt:3,children:e.jsx(Oe,{type:"submit",variant:"contained",color:"primary",disabled:R,fullWidth:!0,size:"large",startIcon:e.jsx(ge,{}),children:"Save Changes"})})})]})})]})})};export{Xe as default};
