import{i as d,a as x,j as e,b0 as me,b1 as ue,Q as ve,U as ye,r as fe,a1 as pe,C as P,Y as be,ag as ge,c as M,s as ce,T as r,B as t,ar as ne,G as o,D as _e,aE as Ie,aF as f,aj as C,ak as H,al as z,am as j,a7 as s,an as $,J as ie,H as R,b2 as Pe,P as Ce,F as He,a0 as ze}from"./index-DKVd45z4.js";import{d as N,a as m,b as $e}from"./Person-CZevtxJY.js";import{d as T}from"./CalendarToday-CzHitqcj.js";var O={},Re=d;Object.defineProperty(O,"__esModule",{value:!0});var b=O.default=void 0,Se=Re(x()),Be=e;b=O.default=(0,Se.default)((0,Be.jsx)("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"}),"Inventory");var F={},ke=d;Object.defineProperty(F,"__esModule",{value:!0});var w=F.default=void 0,Ve=ke(x()),D=e;w=F.default=(0,Ve.default)([(0,D.jsx)("path",{d:"m12 2-5.5 9h11z"},"0"),(0,D.jsx)("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),(0,D.jsx)("path",{d:"M3 13.5h8v8H3z"},"2")],"Category");var A={},Me=d;Object.defineProperty(A,"__esModule",{value:!0});var k=A.default=void 0,Ne=Me(x()),Te=e;k=A.default=(0,Ne.default)((0,Te.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping");var L={},De=d;Object.defineProperty(L,"__esModule",{value:!0});var oe=L.default=void 0,we=De(x()),Ue=e;oe=L.default=(0,we.default)((0,Ue.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var Q={},qe=d;Object.defineProperty(Q,"__esModule",{value:!0});var U=Q.default=void 0,Oe=qe(x()),Fe=e;U=Q.default=(0,Oe.default)((0,Fe.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart");var W={},Ae=d;Object.defineProperty(W,"__esModule",{value:!0});var g=W.default=void 0,Le=Ae(x()),Qe=e;g=W.default=(0,Le.default)((0,Qe.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz");var E={},We=d;Object.defineProperty(E,"__esModule",{value:!0});var _=E.default=void 0,Ee=We(x()),Ge=e;_=E.default=(0,Ee.default)((0,Ge.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description");var G={},Ye=d;Object.defineProperty(G,"__esModule",{value:!0});var q=G.default=void 0,Je=Ye(x()),Ke=e;q=G.default=(0,Je.default)((0,Ke.jsx)("path",{d:"M3 11h8V3H3zm2-6h4v4H5zM3 21h8v-8H3zm2-6h4v4H5zm8-12v8h8V3zm6 6h-4V5h4zm0 10h2v2h-2zm-6-6h2v2h-2zm2 2h2v2h-2zm-2 2h2v2h-2zm2 2h2v2h-2zm2-2h2v2h-2zm0-4h2v2h-2zm2 2h2v2h-2z"}),"QrCode");var Y={},Xe=d;Object.defineProperty(Y,"__esModule",{value:!0});var V=Y.default=void 0,Ze=Xe(x()),er=e;V=Y.default=(0,Ze.default)((0,er.jsx)("path",{d:"M14 11V8c4.56-.58 8-3.1 8-6H2c0 2.9 3.44 5.42 8 6v3c-3.68.73-8 3.61-8 11h6v-2H4.13c.93-6.83 6.65-7.2 7.87-7.2s6.94.37 7.87 7.2H16v2h6c0-7.39-4.32-10.27-8-11m-2 11c-1.1 0-2-.9-2-2 0-.55.22-1.05.59-1.41C11.39 17.79 16 16 16 16s-1.79 4.61-2.59 5.41c-.36.37-.86.59-1.41.59"}),"Scale");var J={},rr=d;Object.defineProperty(J,"__esModule",{value:!0});var de=J.default=void 0,sr=rr(x()),tr=e;de=J.default=(0,sr.default)((0,tr.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business");const le=ce(Ce)(({theme:c})=>({padding:c.spacing(3),borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"})),S=ce(He)(({theme:c})=>({height:"100%",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)",transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)"}})),l=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"}).format(c||0),B=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});function p({children:c,value:I,index:u,...y}){return e.jsx("div",{role:"tabpanel",hidden:I!==u,id:`product-tabpanel-${u}`,"aria-labelledby":`product-tab-${u}`,...y,children:I===u&&e.jsx(t,{sx:{p:3},children:c})})}const lr=()=>{var Z,ee,re,se,te,ae;const{id:c}=me(),I=ue(),u=ve(),y=ye(n=>n.companyState.data.id),[v,xe]=fe.useState(0),K=(Z=I.state)==null?void 0:Z.product,{data:a,isLoading:he,error:X}=pe(["productDetails",y,c],async()=>(await ze.get(`/api/products/product/${y}/${c}`)).data,{enabled:!!y&&!!c,refetchOnWindowFocus:!1}),je=(n,h)=>{xe(h)};if(he)return e.jsx(P,{maxWidth:"lg",sx:{mt:4,mb:4,display:"flex",justifyContent:"center"},children:e.jsx(be,{})});if(X)return e.jsxs(P,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsxs(ge,{severity:"error",children:["Error loading product details: ",X.message]}),e.jsx(M,{startIcon:e.jsx(N,{}),onClick:()=>u("/products"),sx:{mt:2},children:"Back to Products"})]});if(!a&&!K)return e.jsx(P,{maxWidth:"lg",sx:{mt:4,mb:0},children:e.jsxs(le,{children:[e.jsx(r,{variant:"h6",color:"error",children:"Product not found. Please go back and try again."}),e.jsx(M,{startIcon:e.jsx(N,{}),onClick:()=>u("/products"),sx:{mt:2},children:"Back to Products"})]})});const i=a||K;return e.jsxs(P,{className:"content",maxWidth:"lg",sx:{mt:4,mb:4,height:"calc(100vh - 100px)",overflow:"auto"},children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(M,{startIcon:e.jsx(N,{}),onClick:()=>u("/products"),sx:{mb:2},children:"Back to Products"}),e.jsxs(r,{variant:"h4",component:"h1",gutterBottom:!0,children:[ne(i.name)," - Product Details"]})]}),e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,children:e.jsxs(le,{children:[e.jsx(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(r,{variant:"h5",component:"h2",children:ne(i.name)})}),e.jsx(_e,{sx:{mb:3}}),e.jsx(t,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(Ie,{value:v,onChange:je,"aria-label":"product details tabs",children:[e.jsx(f,{icon:e.jsx(oe,{}),label:"Basic Info"}),e.jsx(f,{icon:e.jsx(V,{}),label:"Units"}),e.jsx(f,{icon:e.jsx(k,{}),label:"Restock History"}),e.jsx(f,{icon:e.jsx(U,{}),label:"Price History"}),e.jsx(f,{icon:e.jsx(g,{}),label:"Stock Transactions"})]})}),e.jsx(p,{value:v,index:0,children:e.jsxs(o,{container:!0,spacing:3,children:[e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(_,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Product Name"})]}),e.jsx(r,{variant:"body1",sx:{mb:2},children:i.name})]}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(w,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Category"})]}),e.jsx(r,{variant:"body1",sx:{mb:2},children:i.category||"N/A"})]}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(b,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Base Unit"})]}),e.jsx(r,{variant:"body1",sx:{mb:2},children:i.baseUnit||"N/A"})]}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(q,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"SKU"})]}),e.jsx(r,{variant:"body1",sx:{mb:2},children:i.sku||"N/A"})]}),i.description&&e.jsxs(o,{item:!0,xs:12,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(_,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Description"})]}),e.jsx(r,{variant:"body1",children:i.description})]})]})}),e.jsx(p,{value:v,index:1,children:((ee=a==null?void 0:a.unitConversions)==null?void 0:ee.length)>0?e.jsx(C,{sx:{maxHeight:400,overflow:"auto"},children:e.jsxs(H,{stickyHeader:!0,children:[e.jsx(z,{children:e.jsxs(j,{children:[e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(V,{sx:{mr:1}}),"Unit"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(g,{sx:{mr:1}}),"Conversion to Base Unit"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Price per Unit"]})})]})}),e.jsxs($,{children:[e.jsxs(j,{children:[e.jsx(s,{children:e.jsx(ie,{label:`${i.baseUnit} (Base)`,color:"primary",size:"small"})}),e.jsx(s,{children:"1.0"}),e.jsx(s,{children:l(i.salesPrice)})]}),a.unitConversions.map((n,h)=>e.jsxs(j,{children:[e.jsx(s,{children:n.toUnit}),e.jsxs(s,{children:[n.conversionRate," ",n.toUnit," = 1 ",i.baseUnit]}),e.jsx(s,{children:l(n.salesPrice)})]},h))]})]})}):e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[e.jsx(V,{sx:{mr:1,color:"text.secondary"}}),e.jsxs(r,{variant:"body1",color:"text.secondary",children:["No unit conversions available for this product. Only the base unit (",i.baseUnit,") is used."]})]})}),e.jsx(p,{value:v,index:2,children:((re=a==null?void 0:a.restockHistory)==null?void 0:re.length)>0?e.jsx(C,{sx:{maxHeight:400,overflow:"auto"},children:e.jsxs(H,{stickyHeader:!0,children:[e.jsx(z,{children:e.jsxs(j,{children:[e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{mr:1}}),"Date"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(de,{sx:{mr:1}}),"Vendor"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(b,{sx:{mr:1}}),"Quantity"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Cost Price"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Sales Price"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Total Value"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{sx:{mr:1}}),"Worker"]})})]})}),e.jsx($,{children:a.restockHistory.map((n,h)=>e.jsxs(j,{children:[e.jsx(s,{children:B(n.restockDate)}),e.jsx(s,{children:n.vendorName||"N/A"}),e.jsx(s,{children:n.quantity}),e.jsx(s,{children:l(n.costPrice)}),e.jsx(s,{children:l(n.salesPrice)}),e.jsx(s,{children:l(n.totalPrice)}),e.jsx(s,{children:n.workerName||"N/A"})]},h))})]})}):e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[e.jsx(k,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"No restock history available for this product."})]})}),e.jsx(p,{value:v,index:3,children:((se=a==null?void 0:a.priceHistory)==null?void 0:se.length)>0?e.jsx(C,{sx:{maxHeight:400,overflow:"auto"},children:e.jsxs(H,{stickyHeader:!0,children:[e.jsx(z,{children:e.jsxs(j,{children:[e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{mr:1}}),"Date"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Cost Price"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Sales Price"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(_,{sx:{mr:1}}),"Notes"]})})]})}),e.jsx($,{children:a.priceHistory.map((n,h)=>e.jsxs(j,{children:[e.jsx(s,{children:B(n.date)}),e.jsx(s,{children:l(n.costPrice)}),e.jsx(s,{children:l(n.salesPrice)}),e.jsx(s,{children:n.notes||"N/A"})]},h))})]})}):e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[e.jsx(U,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"No price history available for this product."})]})}),e.jsx(p,{value:v,index:4,children:((te=a==null?void 0:a.stockTransactions)==null?void 0:te.length)>0?e.jsx(C,{sx:{maxHeight:400,overflow:"auto"},children:e.jsxs(H,{stickyHeader:!0,children:[e.jsx(z,{children:e.jsxs(j,{children:[e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{mr:1}}),"Date"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(g,{sx:{mr:1}}),"Type"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(b,{sx:{mr:1}}),"Quantity"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Cost Price"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(m,{sx:{mr:1}}),"Sales Price"]})}),e.jsx(s,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(_,{sx:{mr:1}}),"Notes"]})})]})}),e.jsx($,{children:a.stockTransactions.map((n,h)=>e.jsxs(j,{children:[e.jsx(s,{children:B(n.transactionDate)}),e.jsx(s,{children:e.jsx(ie,{label:n.type,color:n.type==="IN"?"success":"error",size:"small"})}),e.jsx(s,{children:n.quantity}),e.jsx(s,{children:l(n.costPrice)}),e.jsx(s,{children:l(n.salesPrice)}),e.jsx(s,{children:n.notes||"N/A"})]},h))})]})}):e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[e.jsx(g,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"No stock transactions available for this product."})]})})]})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{children:e.jsxs(R,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(m,{color:"primary",sx:{mr:1}}),e.jsx(r,{variant:"h6",children:"Pricing"})]}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Cost Price"}),e.jsx(r,{variant:"h5",color:"primary",gutterBottom:!0,children:l(i.costPrice)}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Sales Price"}),e.jsx(r,{variant:"h5",color:"success.main",gutterBottom:!0,children:l(i.salesPrice)}),((ae=a==null?void 0:a.summary)==null?void 0:ae.averageCostPrice)&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Average Cost Price"}),e.jsx(r,{variant:"body1",color:"info.main",children:l(a.summary.averageCostPrice)})]})]})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{children:e.jsxs(R,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(b,{color:"primary",sx:{mr:1}}),e.jsx(r,{variant:"h6",children:"Inventory"})]}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Stock"}),e.jsxs(r,{variant:"body1",children:[Pe(i.onhand,2)," ",i.baseUnit]}),i.reorderPoint&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Reorder Point"}),e.jsx(r,{variant:"body1",children:i.reorderPoint})]})]})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{children:e.jsxs(R,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(k,{color:"primary",sx:{mr:1}}),e.jsx(r,{variant:"h6",children:"Restock Summary"})]}),a!=null&&a.summary?e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Restocked"}),e.jsx(r,{variant:"h5",color:"primary",gutterBottom:!0,children:a.summary.totalRestocked}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Restock Value"}),e.jsx(r,{variant:"body1",gutterBottom:!0,children:l(a.summary.totalRestockValue)}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Restock Count"}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[a.summary.restockCount," times"]}),a.summary.lastRestockDate&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Last Restock"}),e.jsx(r,{variant:"body1",children:B(a.summary.lastRestockDate)})]})]}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"No restock data available"})]})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{children:e.jsxs(R,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(w,{color:"primary",sx:{mr:1}}),e.jsx(r,{variant:"h6",children:"Product Info"})]}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Product ID"}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:["#",i.id]}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Category"}),e.jsx(r,{variant:"body1",gutterBottom:!0,children:i.category||"N/A"}),i.barcode&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(q,{sx:{mr:1,color:"text.secondary"}}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Barcode"})]}),e.jsx(r,{variant:"body1",children:i.barcode})]})]})})})]})]})};export{lr as default};
