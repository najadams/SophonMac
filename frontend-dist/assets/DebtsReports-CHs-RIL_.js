import{s as V,al as I,r as u,j as e,B as m,T as i,P as p,aE as M,aF as A,G as g,F as C,ae as O,ac as b,b8 as T,aj as N,ak as W,am as P,a7 as n,an as R,bk as L,E as z,ar as S,J as B,c4 as Y,av as E}from"./index-GTE1N4Ws.js";import{S as k}from"./SearchField-D7IF_go7.js";import{P as H}from"./People-Cbr1VZdK.js";import{T as y}from"./TableSortLabel-PFysmw3x.js";import"./InputAdornment-C5JJzB5e.js";const F=V(I)(({theme:s})=>({backgroundColor:"#1a237e","& th":{color:"white",fontWeight:"bold",padding:"16px"},"& th .MuiTableSortLabel-root":{color:"white",fontSize:"0.95rem",fontWeight:"600"},"& th .MuiTableSortLabel-root.Mui-active":{color:"white",fontSize:"1rem",fontWeight:"700"},"& th:hover":{backgroundColor:"#283593"},"& th .MuiTableSortLabel-root:hover":{color:"white"}})),q=({debtData:s})=>{var o;return e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(C,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(m,{sx:{backgroundColor:"#ffebee",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(O,{color:"error",sx:{fontSize:30}})}),e.jsx(i,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Customer Debts"}),e.jsxs(i,{variant:"h4",sx:{fontWeight:700,color:"#d32f2f"},children:["₵",b(((o=s==null?void 0:s.totalDebts)==null?void 0:o.toFixed(2))||"0.00")]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(C,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(m,{sx:{backgroundColor:"#fff3e0",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(T,{color:"secondary",sx:{fontSize:30}})}),e.jsx(i,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Pending Debts"}),e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:(s==null?void 0:s.pendingDebts)||0})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(C,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(m,{sx:{backgroundColor:"#e3f2fd",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(H,{color:"primary",sx:{fontSize:30}})}),e.jsx(i,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Debtors"}),e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:(s==null?void 0:s.totalDebtsCount)||0})]})})]})},G=({vendorDebtData:s})=>{var o,c;return e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(C,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(m,{sx:{backgroundColor:"#ffebee",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(Y,{color:"error",sx:{fontSize:30}})}),e.jsx(i,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Vendor Debts"}),e.jsxs(i,{variant:"h4",sx:{fontWeight:700,color:"#d32f2f"},children:["₵",b(((o=s==null?void 0:s.totalOutstanding)==null?void 0:o.toFixed(2))||"0.00")]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(C,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(m,{sx:{backgroundColor:"#e8f5e9",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(E,{color:"success",sx:{fontSize:30}})}),e.jsx(i,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Paid"}),e.jsxs(i,{variant:"h4",sx:{fontWeight:700,color:"#2e7d32"},children:["₵",b(((c=s==null?void 0:s.totalPaid)==null?void 0:c.toFixed(2))||"0.00")]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(C,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[e.jsx(m,{sx:{backgroundColor:"#fff3e0",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(T,{color:"secondary",sx:{fontSize:30}})}),e.jsx(i,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Pending Payments"}),e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:(s==null?void 0:s.pendingPurchases)||0})]})})]})},U=({debts:s=[]})=>{const[o,c]=u.useState("asc"),[t,j]=u.useState("date"),h=r=>{c(t===r&&o==="asc"?"desc":"asc"),j(r)},f=[...s].sort((r,a)=>{let l=0;if(t==="date"){const w=new Date(r.createdAt),v=new Date(a.createdAt);l=w-v}else t==="customerName"?l=(r.customerName||"").localeCompare(a.customerName||""):t==="amount"&&(l=(r.amount||0)-(a.amount||0));return l*(o==="asc"?1:-1)});return e.jsx(N,{component:p,elevation:2,sx:{borderRadius:"12px",overflow:"hidden"},children:e.jsxs(W,{children:[e.jsx(F,{children:e.jsxs(P,{children:[e.jsx(n,{children:e.jsx(y,{active:t==="date",direction:t==="date"?o:"asc",onClick:()=>h("date"),children:"Date"})}),e.jsx(n,{children:e.jsx(y,{active:t==="customerName",direction:t==="customerName"?o:"asc",onClick:()=>h("customerName"),children:"Customer"})}),e.jsx(n,{align:"right",children:"Phone"}),e.jsx(n,{align:"right",children:e.jsx(y,{active:t==="amount",direction:t==="amount"?o:"asc",onClick:()=>h("amount"),children:"Amount Owed"})}),e.jsx(n,{align:"right",children:"Status"}),e.jsx(n,{align:"right",children:"Handled By"})]})}),e.jsx(R,{children:e.jsx(L,{children:f.map((r,a)=>e.jsxs(z.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:a*.05},style:{display:"table-row",backgroundColor:"white"},children:[e.jsx(n,{children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A"}),e.jsx(n,{children:S(r.customerName||"Unknown Customer")}),e.jsx(n,{align:"right",children:r.customerPhone||"N/A"}),e.jsxs(n,{align:"right",children:["₵",b((r.amount||0).toFixed(2))]}),e.jsx(n,{align:"right",children:e.jsx(B,{label:r.status||"pending",color:r.status==="paid"?"success":"warning",size:"small",sx:{textTransform:"capitalize"}})}),e.jsx(n,{align:"right",children:S(r.workerName||"N/A")})]},r.id||a))})})]})})},J=({vendorDebts:s=[]})=>{const[o,c]=u.useState("asc"),[t,j]=u.useState("date"),h=r=>{c(t===r&&o==="asc"?"desc":"asc"),j(r)},f=[...s].sort((r,a)=>{let l=0;if(t==="date"){const w=new Date(r.createdAt),v=new Date(a.createdAt);l=w-v}else t==="vendorName"?l=(r.vendorName||"").localeCompare(a.vendorName||""):t==="balance"&&(l=(r.balance||0)-(a.balance||0));return l*(o==="asc"?1:-1)});return e.jsx(N,{component:p,elevation:2,sx:{borderRadius:"12px",overflow:"hidden"},children:e.jsxs(W,{children:[e.jsx(F,{children:e.jsxs(P,{children:[e.jsx(n,{children:e.jsx(y,{active:t==="date",direction:t==="date"?o:"asc",onClick:()=>h("date"),children:"Date"})}),e.jsx(n,{children:e.jsx(y,{active:t==="vendorName",direction:t==="vendorName"?o:"asc",onClick:()=>h("vendorName"),children:"Vendor"})}),e.jsx(n,{align:"right",children:"Phone"}),e.jsx(n,{align:"right",children:"Total Cost"}),e.jsx(n,{align:"right",children:"Amount Paid"}),e.jsx(n,{align:"right",children:e.jsx(y,{active:t==="balance",direction:t==="balance"?o:"asc",onClick:()=>h("balance"),children:"Balance Owed"})}),e.jsx(n,{align:"right",children:"Status"})]})}),e.jsx(R,{children:e.jsx(L,{children:f.map((r,a)=>e.jsxs(z.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:a*.05},style:{display:"table-row",backgroundColor:"white"},children:[e.jsx(n,{children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A"}),e.jsx(n,{children:S(r.vendorName||"Unknown Vendor")}),e.jsx(n,{align:"right",children:r.vendorPhone||"N/A"}),e.jsxs(n,{align:"right",children:["₵",b((r.totalCost||0).toFixed(2))]}),e.jsxs(n,{align:"right",children:["₵",b((r.amountPaid||0).toFixed(2))]}),e.jsxs(n,{align:"right",children:["₵",b((r.balance||0).toFixed(2))]}),e.jsx(n,{align:"right",children:e.jsx(B,{label:r.status||"pending",color:r.status==="completed"?"success":"warning",size:"small",sx:{textTransform:"capitalize"}})})]},r.id||a))})})]})})},$=({debtData:s,vendorDebtData:o,customerDebts:c,vendorDebts:t})=>{const[j,h]=u.useState(0),[f,r]=u.useState(""),a=(d,x)=>{h(x),r("")},l=d=>{r(d)},w=u.useMemo(()=>!c||!Array.isArray(c)?[]:c.filter(d=>{const x=f.toLowerCase();return(d.customerName||"").toLowerCase().includes(x)||(d.customerPhone||"").toLowerCase().includes(x)||(d.workerName||"").toLowerCase().includes(x)}),[c,f]),v=u.useMemo(()=>!t||!Array.isArray(t)?[]:t.filter(d=>{const x=f.toLowerCase();return(d.vendorName||"").toLowerCase().includes(x)||(d.vendorPhone||"").toLowerCase().includes(x)||(d.status||"").toLowerCase().includes(x)}),[t,f]);return e.jsxs(m,{sx:{p:3},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:600,color:"#1a237e",mb:3},children:"Debts Report"}),e.jsx(p,{elevation:0,sx:{mb:4},children:e.jsxs(M,{value:j,onChange:a,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{fontWeight:600,fontSize:"1rem"}},children:[e.jsx(A,{label:"Customer Debts"}),e.jsx(A,{label:"Vendor Debts"})]})}),j===0&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{elevation:0,sx:{p:3,mb:4,backgroundColor:"#f8f9fa"},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:600,color:"#1a237e",mb:3},children:"Customer Debts Summary"}),e.jsx(q,{debtData:s})]}),e.jsxs(p,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:600,color:"#1a237e"},children:"Customer Debt Details"}),e.jsx(k,{onSearch:l})]}),e.jsx(U,{debts:w})]})]}),j===1&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{elevation:0,sx:{p:3,mb:4,backgroundColor:"#f8f9fa"},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:600,color:"#1a237e",mb:3},children:"Vendor Debts Summary"}),e.jsx(G,{vendorDebtData:o})]}),e.jsxs(p,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:600,color:"#1a237e"},children:"Vendor Debt Details"}),e.jsx(k,{onSearch:l})]}),e.jsx(J,{vendorDebts:v})]})]})]})};export{F as StyledTableHead,$ as default};
