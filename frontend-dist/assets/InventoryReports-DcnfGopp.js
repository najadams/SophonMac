import{r as x,j as t,B as u,P as b,T as c,G as m,F as y,af as Q,ad as k,b_ as A,aj as I,ak as W,am as v,a7 as l,an as $}from"./index-GTE1N4Ws.js";import{S as w}from"./SearchField-D7IF_go7.js";import{StyledTableHead as R}from"./SalesReport-Dkmm4iv5.js";import{T as j}from"./TableSortLabel-PFysmw3x.js";import"./InputAdornment-C5JJzB5e.js";const P=r=>typeof r=="string"?r.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):r,T=(r,s,n,i)=>{if(!r||r===0)return"0";if(!s||s==="none"||s==="")return"";if(!i||i===1||!n)return`${r} ${s}`;if(i<1){const a=Math.floor(r*i),d=r%Math.floor(1/i);return a>0&&d>0?`${a} ${n} ${d} ${s}`:a>0?`${a} ${n}`:`${d} ${s}`}else return`${r} ${s}`},B=({inventoryData:r,totalQuantitySold:s,totalItemsWithSales:n})=>t.jsxs(m,{container:!0,spacing:3,children:[t.jsx(m,{item:!0,xs:12,sm:6,md:4,children:t.jsxs(y,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[t.jsx(u,{sx:{backgroundColor:"#e3f2fd",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:t.jsx(Q,{color:"primary",sx:{fontSize:30}})}),t.jsx(c,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Quantity Sold"}),t.jsx(c,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:s||0})]})}),t.jsx(m,{item:!0,xs:12,sm:6,md:4,children:t.jsxs(y,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[t.jsx(u,{sx:{backgroundColor:"#e8f5e9",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:t.jsx(k,{color:"success",sx:{fontSize:30}})}),t.jsx(c,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Total Amount Spent"}),t.jsxs(c,{variant:"h4",sx:{fontWeight:700,color:"#2e7d32"},children:["₵",(r||0).toFixed(2)]})]})}),t.jsx(m,{item:!0,xs:12,sm:6,md:4,children:t.jsxs(y,{elevation:2,sx:{p:3,textAlign:"center",backgroundColor:"#ffffff",borderRadius:"12px",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:3}},children:[t.jsx(u,{sx:{backgroundColor:"#fff3e0",borderRadius:"50%",width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:t.jsx(A,{color:"secondary",sx:{fontSize:30}})}),t.jsx(c,{variant:"h6",sx:{color:"#666",mb:1,fontWeight:500},children:"Items with Sales"}),t.jsx(c,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:n||0})]})})]}),F=({inventoryItems:r=[],searchTerm:s})=>{const[n,i]=x.useState("asc"),[a,d]=x.useState("name"),g=Array.isArray(r)?r:[],f=e=>{i(a===e&&n==="asc"?"desc":"asc"),d(e)},p=[...g.filter(e=>e.name.toLowerCase().includes(s.toLowerCase()))].sort((e,h)=>{let o=0;return a==="name"?o=e.name.localeCompare(h.name):a==="totalQuantity"?o=(e.totalQuantity||0)-(h.totalQuantity||0):a==="onhand"?o=(e.onhand||0)-(h.onhand||0):a==="totalSalesPrice"&&(o=(e.totalSalesPrice||0)-(h.totalSalesPrice||0)),o*(n==="asc"?1:-1)});return t.jsx(I,{component:b,elevation:2,sx:{borderRadius:"12px",overflow:"hidden"},children:t.jsxs(W,{children:[t.jsx(R,{children:t.jsxs(v,{children:[t.jsx(l,{children:t.jsx(j,{active:a==="name",direction:a==="name"?n:"asc",onClick:()=>f("name"),children:"Item Name"})}),t.jsx(l,{align:"right",children:t.jsx(j,{active:a==="totalQuantity",direction:a==="totalQuantity"?n:"asc",onClick:()=>f("totalQuantity"),children:"Quantity Sold"})}),t.jsx(l,{align:"right",children:t.jsx(j,{active:a==="onhand",direction:a==="onhand"?n:"asc",onClick:()=>f("onhand"),children:"Quantity Remaining"})}),t.jsx(l,{align:"right",children:t.jsx(j,{active:a==="totalSalesPrice",direction:a==="totalSalesPrice"?n:"asc",onClick:()=>f("totalSalesPrice"),children:"Total Amount Spent"})})]})}),t.jsx($,{children:p.map(e=>t.jsxs(v,{sx:{"&:hover":{backgroundColor:"#f5f5f5"}},children:[t.jsx(l,{children:P(e.name)}),t.jsx(l,{align:"right",children:T(e.totalQuantity||0,e.baseUnit,e.salesUnit||null,e.conversionRate||1)}),t.jsx(l,{align:"right",children:T(e.onhand||0,e.baseUnit,e.salesUnit||null,e.conversionRate||1)}),t.jsxs(l,{align:"right",children:["₵",(e.totalSalesPrice||0).toFixed(2)]})]},e.id||e._id))})]})})},G=({inventoryItems:r})=>{const[s,n]=x.useState(0),[i,a]=x.useState(0),[d,g]=x.useState(0),[f,C]=x.useState("");return x.useEffect(()=>{if(r){const p=r.reduce((o,S)=>o+(S.totalSalesPrice||0),0),e=r.reduce((o,S)=>o+(S.totalQuantity||0),0),h=r.filter(o=>(o.totalQuantity||0)>0).length;n(p),a(e),g(h)}},[r]),t.jsxs(u,{sx:{p:3},children:[t.jsxs(b,{elevation:0,sx:{p:3,mb:4,backgroundColor:"#f8f9fa"},children:[t.jsx(c,{variant:"h4",sx:{fontWeight:600,color:"#1a237e",mb:3},children:"Inventory Report"}),t.jsx(B,{inventoryData:s,totalQuantitySold:i,totalItemsWithSales:d})]}),t.jsxs(b,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(c,{variant:"h5",sx:{fontWeight:600,color:"#1a237e"},children:"Inventory Items"}),t.jsx(w,{onSearch:C})]}),t.jsx(F,{inventoryItems:r,searchTerm:f})]})]})};export{G as default};
